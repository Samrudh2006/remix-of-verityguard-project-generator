<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Examples - VerityGuard Project Generator</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      .examples-container { max-width: 1200px; margin: 2rem auto; padding: 0 2rem; }
      .example-card { background: white; padding: 2rem; border-radius: 1rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
      pre { background: var(--gray-900); color: #fff; padding: 1.5rem; border-radius: 0.75rem; overflow-x: auto; margin: 1rem 0; }
      .example-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
      .example-tags { display: flex; gap: 0.5rem; flex-wrap: wrap; margin: 1rem 0; }
      .example-tag { padding: 0.25rem 0.75rem; background: var(--gray-100); color: var(--gray-700); border-radius: 999px; font-size: 0.8rem; }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="logo">
          <a href="index.html" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.75rem;">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <rect width="40" height="40" rx="8" fill="url(#gradient)"/>
              <path d="M20 10L28 16V24L20 30L12 24V16L20 10Z" fill="white" opacity="0.9"/>
              <defs>
                <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                  <stop offset="0%" stop-color="#4f46e5"/>
                  <stop offset="100%" stop-color="#06b6d4"/>
                </linearGradient>
              </defs>
            </svg>
            <h1>VerityGuard</h1>
          </a>
        </div>
        <nav class="nav">
          <a href="index.html">Home</a>
          <a href="docs.html">Docs</a>
          <a href="api.html">API</a>
          <a href="examples.html">Examples</a>
        </nav>
      </div>
    </header>

    <div class="examples-container">
      <h1>Code Examples</h1>
      <p>Real-world examples of projects generated with VerityGuard.</p>

      <div class="example-card">
        <div class="example-header">
          <h2>Full-Stack E-Commerce Platform</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>
        <div class="example-tags">
          <span class="example-tag">React</span>
          <span class="example-tag">Node.js</span>
          <span class="example-tag">PostgreSQL</span>
          <span class="example-tag">Stripe</span>
        </div>
        <p>Complete e-commerce solution with product catalog, shopping cart, and payment processing.</p>
        
        <h3>Frontend - Product Component</h3>
        <pre>import React, { useState, useEffect } from 'react';
import { useCart } from '../hooks/useCart';

export const ProductCard = ({ product }) => {
  const { addToCart } = useCart();
  
  return (
    &lt;div className="product-card"&gt;
      &lt;img src={product.image} alt={product.name} /&gt;
      &lt;h3&gt;{product.name}&lt;/h3&gt;
      &lt;p&gt;${product.price}&lt;/p&gt;
      &lt;button onClick={() => addToCart(product)}&gt;
        Add to Cart
      &lt;/button&gt;
    &lt;/div&gt;
  );
};</pre>

        <h3>Backend - Order Processing</h3>
        <pre>import express from 'express';
import Stripe from 'stripe';
import { Order } from '../models/Order';

const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);

export const createOrder = async (req, res) => {
  try {
    const { items, shippingAddress } = req.body;
    
    // Calculate total
    const total = items.reduce((sum, item) => 
      sum + item.price * item.quantity, 0
    );
    
    // Create payment intent
    const paymentIntent = await stripe.paymentIntents.create({
      amount: total * 100,
      currency: 'usd'
    });
    
    // Create order
    const order = await Order.create({
      userId: req.user.id,
      items,
      total,
      shippingAddress,
      paymentIntentId: paymentIntent.id
    });
    
    res.json({ order, clientSecret: paymentIntent.client_secret });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
};</pre>
      </div>

      <div class="example-card">
        <div class="example-header">
          <h2>Real-Time Chat Application</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>
        <div class="example-tags">
          <span class="example-tag">Vue</span>
          <span class="example-tag">Socket.io</span>
          <span class="example-tag">Redis</span>
        </div>
        <p>Real-time messaging with WebSocket support and Redis for scalability.</p>

        <h3>Frontend - Chat Component</h3>
        <pre>&lt;template&gt;
  &lt;div class="chat-container"&gt;
    &lt;div class="messages"&gt;
      &lt;div v-for="msg in messages" :key="msg.id" class="message"&gt;
        &lt;strong&gt;{{ msg.user }}:&lt;/strong&gt; {{ msg.text }}
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;input 
      v-model="newMessage" 
      @keyup.enter="sendMessage"
      placeholder="Type a message..."
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue';
import { io } from 'socket.io-client';

const socket = io('ws://localhost:5000');
const messages = ref([]);
const newMessage = ref('');

onMounted(() => {
  socket.on('message', (msg) => {
    messages.value.push(msg);
  });
});

const sendMessage = () => {
  socket.emit('message', { text: newMessage.value });
  newMessage.value = '';
};
&lt;/script&gt;</pre>

        <h3>Backend - WebSocket Server</h3>
        <pre>import { Server } from 'socket.io';
import { createClient } from 'redis';

const io = new Server(server);
const pubClient = createClient();
const subClient = pubClient.duplicate();

await Promise.all([pubClient.connect(), subClient.connect()]);

io.on('connection', (socket) => {
  console.log('User connected:', socket.id);
  
  socket.on('message', async (data) => {
    const message = {
      id: Date.now(),
      user: socket.user.name,
      text: data.text,
      timestamp: new Date()
    };
    
    // Broadcast to all clients
    io.emit('message', message);
    
    // Store in Redis
    await pubClient.lPush('messages', JSON.stringify(message));
  });
});</pre>
      </div>

      <div class="example-card">
        <div class="example-header">
          <h2>REST API with Authentication</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>
        <div class="example-tags">
          <span class="example-tag">Express</span>
          <span class="example-tag">JWT</span>
          <span class="example-tag">MongoDB</span>
        </div>

        <h3>Authentication Middleware</h3>
        <pre>import jwt from 'jsonwebtoken';
import { User } from '../models/User';

export const authenticate = async (req, res, next) => {
  try {
    const token = req.headers.authorization?.split(' ')[1];
    
    if (!token) {
      return res.status(401).json({ error: 'No token provided' });
    }
    
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    const user = await User.findById(decoded.userId);
    
    if (!user) {
      return res.status(401).json({ error: 'User not found' });
    }
    
    req.user = user;
    next();
  } catch (error) {
    res.status(401).json({ error: 'Invalid token' });
  }
};</pre>

        <h3>Protected Route</h3>
        <pre>import express from 'express';
import { authenticate } from '../middleware/auth';

const router = express.Router();

router.get('/api/profile', authenticate, async (req, res) => {
  res.json({ user: req.user });
});

router.put('/api/profile', authenticate, async (req, res) => {
  const { name, bio } = req.body;
  
  req.user.name = name;
  req.user.bio = bio;
  await req.user.save();
  
  res.json({ user: req.user });
});

export default router;</pre>
      </div>

      <div class="example-card">
        <div class="example-header">
          <h2>GraphQL API</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>
        <div class="example-tags">
          <span class="example-tag">GraphQL</span>
          <span class="example-tag">Apollo</span>
          <span class="example-tag">TypeScript</span>
        </div>

        <h3>Schema Definition</h3>
        <pre>import { gql } from 'apollo-server-express';

export const typeDefs = gql\`
  type User {
    id: ID!
    email: String!
    name: String
    posts: [Post!]!
  }
  
  type Post {
    id: ID!
    title: String!
    content: String!
    author: User!
    createdAt: String!
  }
  
  type Query {
    users: [User!]!
    user(id: ID!): User
    posts: [Post!]!
    post(id: ID!): Post
  }
  
  type Mutation {
    createPost(title: String!, content: String!): Post!
    updatePost(id: ID!, title: String, content: String): Post!
    deletePost(id: ID!): Boolean!
  }
\`;</pre>

        <h3>Resolvers</h3>
        <pre>export const resolvers = {
  Query: {
    users: async () => await User.findAll(),
    user: async (_, { id }) => await User.findById(id),
    posts: async () => await Post.findAll(),
    post: async (_, { id }) => await Post.findById(id)
  },
  
  Mutation: {
    createPost: async (_, { title, content }, { user }) => {
      if (!user) throw new Error('Not authenticated');
      
      return await Post.create({
        title,
        content,
        authorId: user.id
      });
    }
  },
  
  User: {
    posts: async (user) => await Post.findByAuthor(user.id)
  },
  
  Post: {
    author: async (post) => await User.findById(post.authorId)
  }
};</pre>
      </div>

      <div class="example-card">
        <div class="example-header">
          <h2>Microservices Architecture</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>
        <div class="example-tags">
          <span class="example-tag">Microservices</span>
          <span class="example-tag">RabbitMQ</span>
          <span class="example-tag">Docker</span>
        </div>

        <h3>Service Communication</h3>
        <pre>import amqp from 'amqplib';

class MessageBroker {
  constructor() {
    this.connection = null;
    this.channel = null;
  }
  
  async connect() {
    this.connection = await amqp.connect(process.env.RABBITMQ_URL);
    this.channel = await this.connection.createChannel();
  }
  
  async publish(queue, message) {
    await this.channel.assertQueue(queue);
    this.channel.sendToQueue(queue, Buffer.from(JSON.stringify(message)));
  }
  
  async subscribe(queue, callback) {
    await this.channel.assertQueue(queue);
    this.channel.consume(queue, (msg) => {
      if (msg) {
        const content = JSON.parse(msg.content.toString());
        callback(content);
        this.channel.ack(msg);
      }
    });
  }
}

export const broker = new MessageBroker();</pre>

        <h3>Service Example</h3>
        <pre>import express from 'express';
import { broker } from './broker';

const app = express();

// User service
app.post('/api/users', async (req, res) => {
  const user = await User.create(req.body);
  
  // Notify other services
  await broker.publish('user.created', { userId: user.id });
  
  res.json({ user });
});

// Email service listening for user creation
broker.subscribe('user.created', async (data) => {
  await sendWelcomeEmail(data.userId);
});</pre>
      </div>

      <div class="example-card">
        <div class="example-header">
          <h2>Docker Compose Setup</h2>
          <button class="btn btn-primary btn-small" onclick="alert('Copy to clipboard')">Copy</button>
        </div>

        <h3>docker-compose.yml</h3>
        <pre>version: '3.8'

services:
  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:5000
    depends_on:
      - backend
  
  backend:
    build: ./backend
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/mydb
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis
  
  db:
    image: postgres:15
    environment:
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=mydb
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7
    ports:
      - "6379:6379"

volumes:
  postgres_data:</pre>
      </div>
    </div>

    <footer class="footer">
      <div class="container">
        <p style="text-align: center;">© 2025 VerityGuard Project Generator</p>
      </div>
    </footer>
  </body>
</html>
